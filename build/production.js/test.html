<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="clone.js" type="text/javascript"></script>
    <script src="ReferenceRegistry.js" type="text/javascript"></script>
    <script src="ImmutableGraph.js" type="text/javascript"></script>
    <script src="ImmutableGraphArray.js" type="text/javascript"></script>
    <script src="ImmutableGraphObject.js" type="text/javascript"></script>
    <script src="ImmutableGraphRegistry.js" type="text/javascript"></script>
    <script>
        var exampleData = {
            test: {
                bla: {
                    items: []
                }
            },
            other: {
                items: []
            }
        };
        var imo = ImmutableGraphRegistry.getImmutableObject(exampleData);
        var items = imo.wrapped().test.wrapped().bla.wrapped().items;
        var now = new Date();
        console.time('Insert perf test');
        for (var i = 0, l = 200000; i < l; i++) {
            items.insert({
                id: 2,
                title: 'woop' + i
            });
        }
        imo.afterChange(function() {
            console.timeEnd('Insert perf test');
            var later = new Date();
            var duration = later.getTime() - now.getTime();
            var d = new Date(duration);
            //expect(d.getSeconds()).toBeLessThan(1);
        });

        console.time('Insert plain array test');
        var a = [];
        for (var i = 0, l = 200000; i < l; i++) {
            a.push({id: 2, title: 'bla' + i});
        }
        console.timeEnd('Insert plain array test');

    </script>
</head>
<body>

</body>
</html>